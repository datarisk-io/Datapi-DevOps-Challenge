# This is a basic workflow to help you get started with Actions

name: Build and Push Image platform ARM

on:
  push:
    branches: [ "master" ]

env:
  REGISTRY: ghcr.io

jobs:
  build-and-push-image:
    runs-on: ubuntu-latest-ARM

    # strategy:
    #   matrix:
    #     arch: [arm64]

    permissions:
      contents: read
      packages: write

    steps:
      - name: Realizando checkout do reposit√≥rio
        uses: actions/checkout@v4

      # - name: Login to Docker Hub
      #   uses: docker/login-action@v3
      #   with:
      #     username: ${{ secrets.DOCKERHUB_USERNAME }}
      #     password: ${{ secrets.DOCKERHUB_TOKEN }}

      # - name: Docker Setup QEMU
      #   uses: crazy-max/ghaction-docker-buildx@v3
      # - name: Set up QEMU
      #   uses: docker/setup-qemu-action@v3
      - name: test
        run: |
          uname -p

      # - name: Setup Docker on macOS
      #   uses: douglascamata/setup-docker-macos-action@v1-alpha

      # - name: Log in no GitHub Container Registry
      #   uses: docker/login-action@v3
      #   with:
      #     registry: ${{ env.REGISTRY }}
      #     username: ${{ github.actor }}
      #     password: ${{ secrets.GITHUB_TOKEN }}

      # - name: Build e push Docker image
      #   run: |
      #     cd projeto-fsharp
      #     docker build . --tag ghcr.io/vitor-csilva/api-devops-challenge:arm
      #     docker push ghcr.io/vitor-csilva/api-devops-challenge:arm
          
      # - name: Build e push Docker image
      #   run: |
      #     cd projeto-fsharp
      #     docker buildx create --name mybuilder
      #     docker buildx use mybuilder
      #     docker buildx build --platform linux/arm64 -t ghcr.io/vitor-csilva/api-devops-challenge:arm .
      #     docker push ghcr.io/vitor-csilva/api-devops-challenge:arm
